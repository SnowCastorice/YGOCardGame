{
  "_说明": "版本更新日志。每次更新都会在这里记录，网页上也会显示这些信息。格式：版本号、日期、更新内容列表。",
  "versions": [
    {
      "version": "1.4.8",
      "date": "2026-02-27",
      "title": "卡包分类选项卡 + 新增 PREMIUM PACK 2026",
      "changes": [
        "🏷️ 主页卡包列表新增分类选项卡：补充包、主题卡组、系列补充包、特殊包",
        "📦 新增卡包 PREMIUM PACK 2026（26PP，系列补充包分类，32张卡）",
        "🎨 选项卡采用药丸胶囊设计，横向可滚动，默认选中「补充包」"
      ]
    },
    {
      "version": "1.4.7",
      "date": "2026-02-26",
      "title": "开包界面封面图可点击放大查看",
      "changes": [
        "🔍 开包界面点击卡包封面图可弹出大图查看器，方便查看封面细节"
      ]
    },
    {
      "version": "1.4.6",
      "date": "2026-02-26",
      "title": "代码质量清理 — 消除冗余，提升可维护性",
      "changes": [
        "🧹 补全 v1.4.4、v1.4.5 版本记录到更新日志",
        "📦 game.js：提取稀有度排序常量（消除 3 处重复定义），删除未使用的 bindEvents() 函数",
        "🎨 style.css：修复 .viewer-hint 重复 font-size 声明，清理空注释残留",
        "🔧 api.js：移除空壳函数 getCachedImageUrl 及重复 JSDoc 注释"
      ]
    },
    {
      "version": "1.4.5",
      "date": "2026-02-26",
      "title": "封面图加载优化 — 二次进入秒显，告别白屏等待",
      "changes": [
        "⚡ 移除无效的 Cache API 缓存方案（外部图源不支持 CORS，fetch 每次失败）",
        "🔄 改用浏览器原生 HTTP 缓存：卡包列表已加载过的封面图，开包界面直接命中缓存",
        "🏎️ 缓存命中时跳过骨架屏和淡入动画，封面图瞬间显示",
        "🔗 统一 referrerpolicy='no-referrer'，确保列表页和开包页缓存键一致"
      ]
    },
    {
      "version": "1.4.4",
      "date": "2026-02-26",
      "title": "开包界面 UI 优化 — 更紧凑、更直观",
      "changes": [
        "🗑️ 移除冗余的「开包花费」信息行（按钮和顶栏已显示价格与余额）",
        "🖼️ 新增卡包封面图展示：标题下方显示封面，填充空白区域",
        "📦 「返回选择卡包」按钮整合到按钮容器中，布局更紧凑",
        "🎨 优化按钮间距和整体排版，界面更加精炼"
      ]
    },
    {
      "version": "1.4.3",
      "date": "2026-02-26",
      "title": "移动端专属适配 — 舍弃桌面端差异，统一移动端体验",
      "changes": [
        "📱 舍弃桌面端独立样式，桌面端与移动端完全一致（居中展示，max-width: 500px）",
        "🔧 移除所有 @media 响应式断点，移动端样式直接作为默认样式",
        "📐 viewport 添加 viewport-fit=cover，适配刘海屏设备",
        "🛡️ 顶栏和游戏区域添加 safe-area-inset 安全边距，适配各种手机刘海和底部横条",
        "👆 所有按钮 :hover 效果同时添加 :active 支持，移动端点击反馈更灵敏",
        "🔍 卡包预览放大镜图标改为始终可见（移动端无 hover 状态）"
      ]
    },
    {
      "version": "1.4.2",
      "date": "2026-02-26",
      "title": "卡包选择模块重设计 — 横向卡片布局，信息更精炼",
      "changes": [
        "📐 卡包选择列表改为横向卡片布局（左图右文），统一固定高度，整齐一致",
        "🔍 预览入口改为卡图右上角半透明放大镜图标，点击卡图即可预览卡包内容",
        "🪙 金币价格以胶囊标签展示在卡包名下方，简洁醒目",
        "📅 新增发售日期信息，卡包编码与日期并排展示",
        "�️ 精简冗余信息：移除种卡数、每包张数、随机模式等细节展示",
        "📱 移动端预览图标始终可见，操作更直观"
      ]
    },
    {
      "version": "1.4.1",
      "date": "2026-02-26",
      "title": "顶栏排版优化 — 一行搞定，卡包空间更大",
      "changes": [
        "📐 顶部导航栏重新设计：货币、模式切换、功能按钮在一行内紧凑排列",
        "🗑️ 移除冗余的「模式提示条」和「卡包选择副标题」，减少信息噪音",
        "📱 导航按钮仅保留图标（🎒💾🔧），移动端空间利用率大幅提升",
        "⬆️ 游戏区域上方空间减少约 50%，卡包展示区域更大更舒适"
      ]
    },
    {
      "version": "1.4.0",
      "date": "2026-02-26",
      "title": "OCG 数据架构大重构 — 本地数据优先，零 API 调用",
      "changes": [
        "🏗️ OCG 卡牌数据架构重构：本地 JSON 文件内嵌完整卡牌信息（中文名/日文名/英文名/攻防/效果），零 API 调用即可加载",
        "⚡ OCG 卡包加载速度大幅提升：80张卡从30-60秒（API）→ 几乎瞬时（本地JSON），开包不再需要等待",
        "🔧 新增 build_pack_data.py 脚本：自动从 YGOCDB 全量数据库提取卡牌详情，注入到卡包文件中",
        "📦 新增 data/common/cards.json：YGOCDB 全量卡牌数据库（12MB，13900+ 张卡），作为离线数据源",
        "🎌 聚焦 OCG 开包体验：TCG 入口暂时隐藏，可在开发者工具中开启 TCG 测试模式",
        "⚠️ TCG 测试模式：开发者工具中新增 TCG 开关，开启后带有「开发未完成」警告提示",
        "🔄 API 回退机制：未构建本地数据的卡包仍可通过 API 加载（向后兼容）"
      ]
    },
    {
      "version": "1.3.4",
      "date": "2026-02-25",
      "title": "UI 优化 — 版本号统一 & 日志入口下移",
      "changes": [
        "📋 日志入口从顶部导航栏移至底部版本号，点击即可查看更新日志",
        "🔢 页脚版本号与更新日志自动保持一致，不再需要手动同步",
        "🧹 顶部导航栏精简，移除日志按钮减少视觉干扰"
      ]
    },
    {
      "version": "1.3.3",
      "date": "2026-02-25",
      "title": "十连开包体验优化 — 相同卡片合并展示",
      "changes": [
        "🃏 十连开包结果自动合并相同卡片，右下角显示 ×2、×3 等数量角标",
        "📊 合并后按稀有度从高到低排序，稀有卡优先展示",
        "🎴 单包开包保持原始展示，不受合并影响",
        "🔧 修复浏览器缓存导致新功能不生效的问题（更新资源版本号）"
      ]
    },
    {
      "version": "1.3.2",
      "date": "2026-02-25",
      "title": "批量开包 & 经济调整",
      "changes": [
        "🎴 新增「开十包」功能：一次性开 10 包，所有卡片汇总展示",
        "💰 初始金币提升至 10000，畅快开包无压力",
        "📊 批量开包结果标题显示包数（如「开包结果 (×10)」）",
        "🎬 卡片展示动画自动适配数量，50 张卡依次流畅出现",
        "💡 余额不足时自动提示可开的最大包数，确认后开包"
      ]
    },
    {
      "version": "1.3.1",
      "date": "2026-02-25",
      "title": "图鉴收集进度细化 — 看清每个稀有度版本",
      "changes": [
        "🎨 图鉴角标颜色区分收集状态：已收集的稀有度版本显示彩色，未收集的显示灰色",
        "📊 右下角数量标按稀有度版本分别显示数量和对应颜色，一眼看清各版本收集进度",
        "🔄 背包系统升级：记录每张卡各稀有度版本的独立收集数量",
        "📦 旧版存档数据自动兼容迁移，无需手动操作"
      ]
    },
    {
      "version": "1.3.0",
      "date": "2026-02-25",
      "title": "多版本稀有度抽卡系统 — OCG 真实开包体验",
      "changes": [
        "🎴 全新 OCG 抽卡方案：每包 5 张 = 4 张 N 卡 + 1 张非 N 稀有卡，同包编号不重复",
        "✨ 多版本稀有度系统：同一张卡可能开出不同稀有度版本（如 SR/SER/PSER）",
        "🌈 新增 4 种稀有度：PSER（棱镜秘密闪）、UTR（终极闪）、SER（秘密闪）、NR（普通闪）",
        "🎨 8 种稀有度完整 UI 支持：专属配色、边框光效、角标、价格体系",
        "📦 BLZD 卡包已配置真实稀有度数据（80 张主包卡 + 20 张辅助包记录）",
        "⚙️ 卡包支持独立抽卡方案配置（packScheme），兼容新旧两种方案",
        "🔄 缓存系统升级：自动同步多版本稀有度数据，无需手动清除缓存",
        "💎 稀有度越高概率越低，开出 PSER 版本将极为稀有"
      ]
    },
    {
      "version": "1.2.0",
      "date": "2026-02-25",
      "title": "卡片预览功能 — 开包前先看看有什么",
      "changes": [
        "🔍 卡包列表新增「预览」按钮，点击即可查看卡包内所有卡片",
        "📊 预览弹窗显示收集进度条（已拥有/总数/百分比）",
        "🏷️ 稀有度分布标签：一目了然 UR、SR、R、N 各有多少张",
        "🎨 已拥有卡片正常显示+绿色数量角标，未拥有卡片灰度+🔒图标",
        "🔢 新增「编号」排序：按卡包内编号（如 BLZD-JP001）排序，作为默认排序方式",
        "📋 四种排序方式：编号（默认）、稀有度、已拥有优先、名称",
        "🔎 点击卡片可放大查看大图",
        "💰 卡包列表新增价格标签（左上角）和预览按钮（右下角）对角线分布",
        "📱 预览弹窗完美适配移动端"
      ]
    },
    {
      "version": "1.1.0",
      "date": "2026-02-25",
      "title": "背包系统上线 — 收集你的卡片",
      "changes": [
        "🎒 新增背包系统：开包获得的卡片自动存入背包",
        "📦 导航栏背包按钮显示已收集的卡片种类数角标",
        "🃏 背包弹窗展示所有收集的卡片，含统计概览（种类数/总张数/总价值）",
        "🔄 四种排序方式：稀有度、数量、价格、最新获取",
        "🖼️ 卡图+稀有度角标+数量角标，点击可放大查看",
        "♻️ 重复卡片自动合并计数，不会重复占格子",
        "💾 背包数据通过浏览器本地存储持久化",
        "🔧 重置游戏时同步清空背包数据"
      ]
    },
    {
      "version": "1.0.1",
      "date": "2026-02-24",
      "title": "卡包封面图 + 开发者工具优化",
      "changes": [
        "🖼️ 卡包选择界面新增封面图展示，告别纯 emoji 占位",
        "🌎 TCG 卡包：自动加载 YGOProDeck 官方卡包封面图",
        "🎌 OCG 卡包：异步加载卡包首张卡的卡图作为封面（因 YGOProDeck 无 OCG 独占卡包封面）",
        "🔄 封面图多级 Fallback：官方封面 → 首卡卡图 → emoji 🎴",
        "✨ 封面图支持鼠标悬停放大动画效果",
        "📱 移动端封面图自适应尺寸",
        "🔧 开发者工具弹窗重构：标题改为「开发者工具」，功能分为卡片式板块",
        "📦 开发者工具新增快捷操作：添加 10000 金币、重置游戏",
        "🛠️ 开发者工具层级优化：当前模式信息移至输入框上方，逻辑更清晰"
      ]
    },
    {
      "version": "1.0.0",
      "date": "2026-02-19",
      "title": "货币系统上线 — 金币与钻石双货币体系",
      "changes": [
        "💰 新增货币系统：引入金币（🪙）和钻石（💎）两种虚拟货币",
        "💱 支持货币兑换：10 金币可兑换 1 钻石，1 钻石可兑换 10 金币",
        "🎁 新用户首次进入自动赠送 1000 金币 + 10 钻石",
        "🎴 开包需要消耗货币：每个卡包标注了所需货币类型和数量",
        "💾 货币余额通过浏览器本地存储持久化，关闭网页不会丢失",
        "🏷️ 卡包选择界面新增价格标签，一目了然",
        "📊 顶部导航栏新增货币余额实时显示，点击可打开兑换弹窗",
        "🔄 兑换弹窗支持自定义兑换次数、全部兑换、实时预览",
        "⚠️ 余额不足时开包按钮自动置灰，并提示前往兑换",
        "📱 货币系统完全适配移动端显示"
      ]
    },
    {
      "version": "0.9.2",
      "date": "2026-02-19",
      "title": "KONAMI 卡图代理迁移 — 从 Worker 迁移到 Pages Functions",
      "changes": [
        "🔄 KONAMI 卡图代理从独立 Cloudflare Worker 迁移到 Pages Functions",
        "🌐 解决 workers.dev 域名在国内被墙导致卡图无法加载的问题",
        "📂 新增 functions/api/card-image.js，代理 KONAMI 官方卡图请求",
        "🔗 卡图代理路径改为同域名 /api/card-image?cid=xxx，无需跨域",
        "⚡ 图片缓存策略：30天长期缓存，提升加载速度",
        "🛡️ 内置域名白名单 + CORS 安全策略，防止滥用"
      ]
    },
    {
      "version": "0.9.1",
      "date": "2026-02-19",
      "title": "OCG 卡牌列表拆分为独立文件 — 数据架构优化",
      "changes": [
        "📂 OCG 卡包的卡牌列表从 packs.json 中拆分为独立 JSON 文件",
        "📁 新增 data/ocg/cards/ 目录，每个卡包一个独立卡牌文件",
        "⚡ packs.json 从 25KB 精简至约 2KB，只保留卡包元信息和文件引用",
        "🔄 页面加载时只读取轻量级索引，点击卡包时才按需加载卡牌数据",
        "🔧 fetch_packs.py 工具已更新，--write 模式自动写入独立卡牌文件",
        "📈 支持无限扩展：新增卡包只需添加一个卡牌文件，不影响主配置体积"
      ]
    },
    {
      "version": "0.9.0",
      "date": "2026-02-18",
      "title": "OCG/TCG 数据独立存储 — 数据架构重构",
      "changes": [
        "📂 OCG 和 TCG 的卡包配置和卡包列表现在独立存储，结构更清晰",
        "🏌️‍♂️ data/ocg/ 目录：存放所有 OCG 数据（packs.json + pack_list.json）",
        "🏌️‍♂️ data/tcg/ 目录：存放所有 TCG 数据（packs.json + pack_list.json）",
        "⚙️ 移除旧的混合文件 cards.json 和 pack_list.json",
        "📦 fetch_packs.py 工具脚本已更新，支持新的目录结构",
        "⚡ 网页初始化时并行加载 OCG/TCG 配置，不影响加载速度"
      ]
    },
    {
      "version": "0.8.0",
      "date": "2026-02-18",
      "title": "卡包全面更新 — OCG 和 TCG 均替换为最近发售的三个系列",
      "changes": [
        "📦 OCG 卡包全面更新为最新三个系列：",
        "  🔹 BLAZING DOMINION（ブレイジング・ドミニオン）2026-01-24，80张",
        "  🔹 THE CHRONICLES DECK 精霊術の使い手 2026-01-24，42张",
        "  🔹 DUELIST BOX PRISMATIC SUMMON 2025-12-20，60张",
        "📦 TCG 卡包全面更新为最新三个系列：",
        "  🔹 MAZE OF MUERTOS 2026-02-20",
        "  🔹 BURST PROTOCOL 2026-02-06",
        "  🔹 Phantom Revenge 2025-12-05",
        "🔧 OCG 卡包数据通过 YGOCDB 自动抓取（fetch_packs.py），TCG 卡包使用 YGOProDeck API",
        "⚠️ OCG 卡包稀有度尚未补充，使用默认分布，后续将完善"
      ]
    },
    {
      "version": "0.7.1",
      "date": "2026-02-17",
      "title": "新增最新OCG卡包 BURST PROTOCOL — 2026年1月最新补充包",
      "changes": [
        "📦 新增 OCG 卡包「BURST PROTOCOL」（バースト・プロトコル），2026年1月25日发售",
        "🃏 共收录 99 张卡牌（UR×24 / SR×26 / N×49），全部通过 API 自动拉取",
        "🇨🇳 全部 99 张卡牌均有中文名（通过 YGOCDB 补充），支持中日双语展示",
        "⭐ 包含多个热门主题卡组强化：星尘龙/爆裂体、救援ACE、耀圣之诗、堕天使等",
        "🔧 卡包数据源：YGOProDeck（英文卡牌数据）+ YGOCDB（中文名+日文名补充）"
      ]
    },
    {
      "version": "0.7.0",
      "date": "2026-02-17",
      "title": "卡图点击放大查看 — 看清每一张卡牌的精美卡图",
      "changes": [
        "🔍 开包结果中的卡图现在可以点击放大查看大图",
        "✨ 放大/关闭带有流畅的缩放和淡入淡出过渡动画",
        "📱 完美适配手机端，大图自动适应屏幕尺寸",
        "🎴 放大查看时显示中文名 + 外文名双语卡名",
        "⌨️ 支持 ESC 键快速关闭，也可点击任意位置关闭",
        "🛡️ API 限流保护优化：全局请求节流器 + 自动退避重试机制"
      ]
    },
    {
      "version": "0.6.1",
      "date": "2026-02-17",
      "title": "OCG 改用日文版卡图 — 原汁原味的日版开包体验",
      "changes": [
        "🖼️ OCG 模式现在使用日文版卡图（卡面文字为日文），更贴近真实日版开包",
        "🌎 TCG 模式保持英文版卡图不变",
        "📡 OCG 卡图源改用 YGOCDB CDN（YGOPro 数据库日文卡图）",
        "🔄 已有 OCG 缓存会自动从英文卡图更新为日文卡图",
        "🛡️ 缓存兼容性优化：旧版缓存自动检测并修复卡图 URL"
      ]
    },
    {
      "version": "0.6.0",
      "date": "2026-02-17",
      "title": "中文卡名 + 外文卡名双语展示 — 面向中国区用户优化",
      "changes": [
        "🇨🇳 卡牌名称改为双语展示：中文名（主） + 外文名（副）",
        "🎌 OCG 模式：中文名 + 日文名（如「青眼白龙 / 青眼の白龍」）",
        "🌎 TCG 模式：中文名 + 英文名（如「青眼白龙 / Blue-Eyes White Dragon」）",
        "📡 新增 YGOCDB 中文名自动补充功能，从 YGOCDB API 批量获取中文卡名",
        "🎨 新增双语卡名 CSS 样式：中文名加粗显示，外文名小字灰色",
        "📦 离线备用数据也支持双语展示（nameCN + nameOriginal 字段）",
        "🔧 卡牌数据结构新增 nameCN / nameOriginal 字段，方便后续扩展"
      ]
    },
    {
      "version": "0.5.0",
      "date": "2026-02-16",
      "title": "OCG 改用日文版卡牌数据 — 真正的日版体验",
      "changes": [
        "🇯🇵 OCG 模式改用 YGOProDeck API + language=ja 获取日文卡牌数据",
        "📝 OCG 卡牌现在显示日文卡名和日文效果描述（如「青眼の白龍」「ブラック・マジシャン」）",
        "⚡ OCG 卡牌数据改为批量获取（每批最多20张），加载速度大幅提升",
        "🌐 新增多语言扩展框架：预留简体中文、韩文等语言接口",
        "🔄 YGOProDeck 作为 OCG/TCG 统一数据源，架构更简洁",
        "🛡️ 保留 YGOCDB 作为中文备用数据源（API 故障时自动切换）",
        "📦 OCG 离线备用数据更新为日文版本",
        "💾 缓存 key 按语言区分，切换语言后自动重新获取对应数据"
      ]
    },
    {
      "version": "0.4.0",
      "date": "2026-02-16",
      "title": "OCG 接入 YGOCDB 中文数据源 — 真正的亚洲版体验",
      "changes": [
        "🎌 OCG 模式改用 YGOCDB API（ygocdb.com）获取中文卡牌数据",
        "📝 OCG 卡牌现在显示中文卡名和中文效果描述",
        "🌎 TCG 模式继续使用 YGOProDeck API（英文数据）",
        "🔀 双数据源架构：OCG = YGOCDB + YGOProDeck CDN卡图，TCG = YGOProDeck",
        "📦 OCG 卡包配置改为预定义卡牌ID列表，数据更准确",
        "⚡ OCG 首次加载会逐张获取卡牌信息并缓存，后续秒开",
        "💾 缓存管理界面现在显示数据来源（YGOCDB / YGOProDeck）",
        "🏷️ 卡包列表显示发售日期和卡牌数量"
      ]
    },
    {
      "version": "0.3.0",
      "date": "2026-02-16",
      "title": "新增 OCG 模式 — 支持亚洲版游戏王开包体验",
      "changes": [
        "🎌 新增 OCG（Official Card Game）亚洲版模式，默认展示 OCG 卡包",
        "🌎 原有 TCG（Trading Card Game）欧美版卡包保留，支持一键切换",
        "🔄 顶部导航栏新增 OCG / TCG 模式切换开关",
        "💾 切换模式后自动记住选择，下次打开网页保持上次模式",
        "📦 OCG 初始配置5个卡包：Vol.1、Vol.2、Vol.3、STARTER BOX、PREMIUM PACK 1",
        "🎴 OCG 模式每包5张卡牌（对应日版开包规则），TCG 模式每包9张",
        "📊 OCG 概率调整：UR 更稀有（1%），更贴近真实日版体验",
        "📂 新增 OCG 卡包离线备用数据",
        "🏷️ 网页标题更新为「YGO Pack Opener」"
      ]
    },
    {
      "version": "0.2.0",
      "date": "2026-02-13",
      "title": "接入 YGOProDeck API — 真实卡牌数据与卡图",
      "changes": [
        "🌐 接入 YGOProDeck API，自动获取真实游戏王卡牌数据（名称、属性、卡图等）",
        "💾 实现 IndexedDB 本地缓存系统，卡牌数据缓存7天，避免重复请求",
        "🖼️ 开包结果现在显示真实卡牌图片",
        "📦 卡包配置改为使用官方卡包编码（如 Legend of Blue Eyes White Dragon），无需手动填写卡牌",
        "🎯 新增保底机制：每包最后一张卡至少为 R 稀有度",
        "💾 新增缓存管理界面，可查看和清除缓存数据",
        "⏳ 新增全局加载状态提示（加载卡包数据时显示）",
        "📝 新增版权声明（YGOProDeck & Konami）",
        "📱 优化移动端适配",
        "初始配置3个经典卡包：传说之蓝眼白龙、金属侵略者、法老的仆从"
      ]
    },
    {
      "version": "0.1.0",
      "date": "2026-02-13",
      "title": "项目初始化 - 基础框架搭建",
      "changes": [
        "创建项目基础结构和配置文件",
        "实现卡牌配置表系统（JSON格式，支持策划直接编辑）",
        "实现基础开包动画和卡牌展示效果",
        "添加稀有度系统：N / R / SR / UR 四个等级",
        "添加更新日志页面，记录每次版本迭代",
        "适配Cloudflare Pages部署",
        "初始示例卡包：光与暗的交锋（20张卡牌）"
      ]
    }
  ]
}